---
import { RiHomeSmileFill, RiMenu3Line, RiCloseLine } from "react-icons/ri";
import { FaUsers } from "react-icons/fa";
import { MdOutlineContactPhone } from "react-icons/md";
import { FaMoneyBill1Wave } from "react-icons/fa6";
import DittoLogo from "../interfaz/LogoDitt.astro";

const baseUrl = import.meta.env.BASE_URL;

// Constante de clases de Tailwind
const constants = {
  nav: "sticky top-0 bg-slate-900/90 backdrop-blur-md border-b border-slate-800 z-50 transition-all",
  navContainer: "flex items-center justify-between p-4",
  logo: "flex items-center gap-2",
  logoText: "text-2xl font-bold ml-1 text-white tracking-tight",
  navTabsDesktop: "hidden md:flex items-center gap-8 pr-4",
  navTab:
    "text-slate-300 hover:text-white font-medium transition-all hover:scale-105 flex items-center gap-2 text-sm tracking-wide",
  navButtonPrice:
    "flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white p-2.5 px-6 rounded-full font-bold transition-all duration-300 shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 hover:scale-105",
  iconSize: 18,
};
---

<nav class={constants.nav} id="main-nav">
  <div class={constants.navContainer}>
    {/* Logo Section */}
    <div class={constants.logo}>
      <div class="cursor-pointer hover:scale-110 transition-transform">
        <DittoLogo className="w-10 h-10" />
      </div>
      <h1 class={constants.logoText}>Ditt</h1>
    </div>

    <div class={constants.navTabsDesktop}>
      <a href={baseUrl} class={constants.navTab} aria-label="Ir a Inicio">
        <RiHomeSmileFill size={constants.iconSize} />
        <p class="text-lg">Inicio</p>
      </a>
      <a
        href={`${baseUrl}nosotros/`}
        class={constants.navTab}
        aria-label="Ir a Nosotros">
        <FaUsers size={constants.iconSize} />
        <p class="text-lg">Nosotros</p>
      </a>
      <a
        href={`${baseUrl}contacto/`}
        class={constants.navTab}
        aria-label="Ir a Contacto">
        <MdOutlineContactPhone size={constants.iconSize} />
        <p class="text-lg">Contacto</p>
      </a>
      <a
        href={`${baseUrl}precios/`}
        class={constants.navButtonPrice}
        aria-label="Ir a Precios">
        <FaMoneyBill1Wave size={constants.iconSize} />
        <p class="text-lg">Precios</p>
      </a>
    </div>

    {/* Mobile Hamburger Button */}
    <button
      id="menu-toggle"
      class="md:hidden text-white text-3xl focus:outline-none"
      aria-label="Toggle Menu">
      <div id="icon-menu" class="block">
        <RiMenu3Line size={constants.iconSize + 6} />
      </div>
      <div id="icon-close" class="hidden">
        <RiCloseLine size={constants.iconSize + 6} />
      </div>
    </button>
  </div>

  {/* Mobile Menu Dropdown */}
  <div
    id="mobile-menu"
    class="hidden w-full bg-slate-900 border-t border-slate-800 flex flex-col items-center py-6 space-y-6 md:hidden animate-in slide-in-from-top-2 duration-200">
    <a
      href={baseUrl}
      class={constants.navTab}
      data-nav-link
      aria-label="Ir a Inicio">
      <RiHomeSmileFill size={constants.iconSize} />
      Inicio
    </a>
    <a
      href={`${baseUrl}nosotros/`}
      class={constants.navTab}
      data-nav-link
      aria-label="Ir a Nosotros">
      <FaUsers size={constants.iconSize} />
      Nosotros
    </a>
    <a
      href={`${baseUrl}contacto/`}
      class={constants.navTab}
      data-nav-link
      aria-label="Ir a Contacto">
      <MdOutlineContactPhone size={constants.iconSize} />
      Contacto
    </a>
    <a
      href={`${baseUrl}precios/`}
      class={constants.navButtonPrice}
      data-nav-link
      aria-label="Ir a Precios">
      <FaMoneyBill1Wave size={constants.iconSize} />
      <p class="text-lg">Precios</p>
    </a>
  </div>
</nav>

<script>
  const menuToggle = document.getElementById("menu-toggle");
  const mobileMenu = document.getElementById("mobile-menu");
  const iconMenu = document.getElementById("icon-menu");
  const iconClose = document.getElementById("icon-close");
  const mainNav = document.getElementById("main-nav");
  const navLinks = document.querySelectorAll("[data-nav-link]");

  let isOpen = false;

  function toggleMenu() {
    isOpen = !isOpen;
    if (isOpen) {
      mobileMenu?.classList.remove("hidden");
      iconMenu?.classList.add("hidden");
      iconClose?.classList.remove("hidden");
      mainNav?.classList.add("rounded-b-none");
    } else {
      mobileMenu?.classList.add("hidden");
      iconMenu?.classList.remove("hidden");
      iconClose?.classList.add("hidden");
      mainNav?.classList.remove("rounded-b-none");
    }
  }

  menuToggle?.addEventListener("click", toggleMenu);

  navLinks.forEach((link) => {
    link.addEventListener("click", () => {
      if (isOpen) toggleMenu();
    });
  });
</script>
